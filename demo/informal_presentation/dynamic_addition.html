<!doctype html>
<html lang="en">
<head>
	<title>Example: DBPedia Explorer</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<style>
		body {
			background-color: #3333FF;
			margin: 0px;
			overflow: hidden;
		}

		
	</style>
	
	<link rel="stylesheet" type="text/css" href="css/slide.css" />
	
	<script type="text/javascript" src="../../jquery/jquery-1.7.1.min.js"></script>
	
	<script type="text/javascript" src="../../Three/Three.js"></script>

	<script type="text/javascript" src="../../Three/RequestAnimationFrame.js"></script>

	<script type="text/javascript" src="../../Three/Detector.js"></script>

	<script type="text/javascript" src="../../js/Triptych.js"></script>
	
	<script type="text/javascript" src="../../js/BasicVisualizer.js"></script>
	
	<script type="text/javascript" src="../../js/TextVisualizer.js"></script>

	<script type="text/javascript" src="../../js/BasicGraphLoader.js"></script>
	
	<script type="text/javascript" src="../../js/BasicControls.js"></script>

	<script type="text/javascript" src="../../js/SpringForceLayoutEngine.js"></script>
	
	<script type="text/javascript" src="js/controls.js"></script>
	
	<script>
	
	function handleNext(){
		window.location="conclusion.html";
	}
	
	function handleBack(){
		window.location="new_information_metaphors.html";
	}
	
	function handleUp(){
	}
	
	function handleDown(){
	
	}
	
	</script>
	
</head>

<body>
	<div id="controls">
		<button id="back">Back</button>
		<button id="layout">Layout</button>
		<button id="save">Save</button>
		<button id="next">Next</button>
	</div>
	
	<script>
		if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
		
		var sourceURL = "./php/get_psicquic_xgmml.php?name=RBL2",
		visualizer, xgmml, graph, layoutEngine, space, controls, loader, xgmml;
		
		$.ajax({
				type: "GET",
				url: sourceURL,
				dataType: "xml",
				success: function(data) {
					xgmml = data;
					loader = new TRIPTYCH.BasicGraphLoader();
					graph = loader.load('xgmml', data);
					visualizer = new TRIPTYCH.BasicVisualizer(); 
					layoutEngine = new TRIPTYCH.SpringForceLayoutEngine();
					controls = new TRIPTYCH.BasicControls();
					space = new TRIPTYCH.Space(graph, visualizer, layoutEngine, controls);
					visualizer.setNodeTypes(graph);
					space.init();
					animate();
	
				}
			});
		
		TRIPTYCH.Node.prototype.onClick = function(event, role){
			alert("clicked x=" + this.position.x + " y=" + this.position.y + " z=" + this.position.z);
			addToGraph(this.name, this.position);
		
		}
		
		function addToGraph(name, position){
			url = "./php/get_psicquic_xgmml.php?name=" + name;
			$.ajax({
				type: "GET",
				url: url,
				dataType: "xml",
				success: function(data) {
				
					loader.add(graph, data, position);
	
				}
			});
		}
		
		function animate() {
	
			requestAnimationFrame( animate );
	
			space.update();
	
		}
		
	</script>
</body>

</html>

